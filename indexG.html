<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReVive Contact Log</title>
  <style>
           * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
        }

        body {
            background-color: #fefefe; /* M3 surface-variant */
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background-color: #fff; /* M3 surface */
            box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),
            0px 6px 10px 0px rgba(0, 0, 0, 0.14),
            0px 1px 18px 0px rgba(0, 0, 0, 0.12); /* M3 elevation 2 */
            flex: none;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            height: 48px;
            width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            color: #49454F; /* M3 on-surface-variant */
        }

        /* Tab Navigation Styles */
nav {
    display: flex;
    gap: 16px;
    align-items: center;
}

/* Base styles for all nav tabs */
.nav-tab {
    padding: 6px 10px;
    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
    letter-spacing: 0.25px;
    text-align: center;
    transition: all 0.2s ease;
    cursor: pointer;
    border: 2px solid transparent;
    border-radius: 4px;
}

/* Active tab style */
.nav-tab-active {
    pointer-events: none;
    border: 2px solid #006CFA;
    padding: 6px 10px;
    color: #000000;
    font-weight: bold;
    background-color: #FFFFFF;
    border-radius: 4px;
    text-decoration: none;
}

/* Inactive tab style */
.nav-tab-inactive {
    color: #006CFA;
    text-decoration: none;
}

/* Hover effect for inactive tabs */
.nav-tab-inactive:hover {
    background-color: rgba(0, 108, 250, 0.08);
    border-color: rgba(0, 108, 250, 0.3);
}

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-label {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #645F6B; /* M3 on-surface-variant */
            pointer-events: none;
            transition: opacity 0.2s ease, transform 0.2s ease;
            font-size: 16px;
        }

        .search-input {
            padding: 12px 16px;
            border: 1px solid #CAC4D0; /* M3 outline */
            border-radius: 4px;
            width: 240px;
            font-size: 16px;
            color: #1E1B22; /* M3 on-surface */
        }

        .search-input:focus {
            outline: none;
            border-color: #006CFA; /* M3 primary */
            box-shadow: 0 0 0 2px #A2D2FF; /* M3 primary-container */
        }

        .search-input:focus + .search-label,
        .search-input:not(:placeholder-shown) + .search-label {
            opacity: 0;
            visibility: hidden;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-avatar {
            width: 40px; /* Adjusted size */
            height: 40px; /* Adjusted size */
            background-color: #E6E0E9; /* M3 surface-variant */
            border-radius: 50%;
        }

        .sign-out {
            color: #006CFA; /* M3 primary */
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px; /* M3 label-large */
            font-weight: 500;
            line-height: 20px;
            letter-spacing: 0.1px;
        }
    
    .suggestions-container {
    position: absolute; /* Crucial for positioning the dropdown */
    top: calc(100% + 4px); /* Position below the input */
    left: 0;
    width: 240px; /* Match input width or adjust as needed */
    background-color: #fff;
    border: 1px solid #bdbdbd;
    border-top: none;
    border-radius: 0 0 4px 4px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    display: none; /* Hidden by default */
    z-index: 100; /* Ensure it appears above other elements */
    overflow-y: auto; /* Enable scrolling if needed */
    max-height: 200px; /* Limit dropdown height */
}

.suggestion-item {
    padding: 8px 12px;
    cursor: pointer;
    font-size: 16px;
    color: #333;
}

.suggestion-item:hover,
.suggestion-item.selected {
    background-color: #f0f0f0;
}

.suggestion-highlight {
    font-weight: bold;
    background-color: yellow; /* Visual cue for the matched part */
}

        /* Table Styles */
        .table-container {
            flex: 1;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .table-content {
            flex: 1;
            overflow: auto;
            cursor: grab;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            scrollbar-width: none;
        }

        .table-rows-container {
            display: inline-block;
            min-width: fit-content;
        }

        .table-row {
            display: flex;
            border-bottom: 1px solid #E7E0EC; /* M3 outline-variant */
            width: fit-content;
        }

        .table-row:hover {
            background-color: #F1EFF4; /* M3 hover state */
        }

        .fixed-columns {
            position: sticky;
            left: 0;
            background-color: #fefefe; /* M3 surface-variant */
            box-shadow: 2px 0 4px -2px rgba(0, 0, 0, 0.1);
            z-index: 20;
            display: flex;
        }

        .scrollable-columns {
            display: flex;
        }

        .column-header {
            padding: 12px;
            font-weight: 500;
            border-bottom: 1px solid #E7E0EC; /* M3 outline-variant */
            background-color: #fefefe; /* M3 surface-variant */
            position: sticky;
            top: 0;
            z-index: 10;
            font-size: 12px; /* M3 label-large */
            font-weight: 500;
            line-height: 20px;
            letter-spacing: 0.1px;
            color: #49454F; /* M3 on-surface-variant */
        }

        .column-cell {
            padding: 12px;
            font-size: 14px; /* M3 body-medium */
            font-weight: 400;
            line-height: 20px;
            letter-spacing: 0.25px;
            color: #49454F; /* M3 on-surface-variant */
        }

        .resource-list {
            display: flex;
            flex-direction: column;
        }

        /* Column widths */
        .col-date { width: 120px; }
        .col-days { width: 100px; }
        .col-provider { width: 150px; }
        .col-client { width: 150px; }
        .col-service { width: 180px; }
        .col-accompanied { width: 180px; }
        .col-documentation { width: 180px; }
        .col-resources { width: 180px; }
        .col-health { width: 180px; }
        .col-program { width: 150px; }
        .col-housing { width: 150px; }
        .col-counted { width: 150px; }
        .col-notes { width: 180px; }
        .col-status { width: 150px; }

        /* Responsive styles */
        @media (max-width: 1024px) {
            .header-left, .header-right {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            header {
                flex-direction: column;
                align-items: flex-start;
            }

            .search-input {
                width: 100%;
            }
        }

        /* For mobile views */
        @media (max-width: 768px) {
            .fixed-columns .col-days,
            .fixed-columns .col-provider {
                display: none;
            }

            .scrollable-columns .col-documentation,
            .scrollable-columns .col-health,
            .scrollable-columns .col-program {
                display: none;
            }
        }

        /* --- DIALOG BOX  ---  */
        .dialog-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .dialog-content {
            background: #fff; /* M3 surface */
            padding: 24px;
            border-radius: 4px;
            width: 500px;
            box-shadow: 0px 7px 8px -4px rgba(0, 0, 0, 0.2),
            0px 12px 17px 2px rgba(0, 0, 0, 0.14),
            0px 3px 23px 2px rgba(0, 0, 0, 0.12); /* M3 elevation 3 */
        }

        .dialog-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dialog-body {
            margin-bottom: 20px;
        }

        .dialog-options {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .dialog-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #49454F; /* M3 on-surface-variant */
        }

        .dialog-prompt {
            font-size: 16px; /* M3 body-large */
            font-weight: 400;
            line-height: 24px;
            letter-spacing: 0.15px;
            color: #1E1B22; /* M3 on-surface */
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px; /* M3 label-large */
            font-weight: 500;
            line-height: 20px;
            letter-spacing: 0.1px;
            color: #49454F; /* M3 on-surface-variant */
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #CAC4D0; /* M3 outline */
            border-radius: 4px;
            resize: vertical;
            font-size: 16px;
            color: #1E1B22; /* M3 on-surface */
        }

        .form-control:focus {
            outline: none;
            border-color: #006CFA; /* M3 primary */
            box-shadow: 0 0 0 2px #A2D2FF; /* M3 primary-container */
        }

        .btn {
            padding: 10px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px; /* M3 label-large */
            font-weight: 500;
            line-height: 20px;
            letter-spacing: 0.1px;
            text-transform: uppercase;
        }

        .btn-primary {
            background-color: #006CFA; /* M3 primary */
            color: #fff; /* M3 on-primary */
        }

        .btn-primary:hover {
            background-color: #005CB2; /* M3 primary-darken-1 */
        }

        .btn-secondary {
            background-color: #E6E0E9; /* M3 surface-variant */
            color: #49454F; /* M3 on-surface-variant */
        }

        .btn-secondary:hover {
            background-color: #D0CBD5; /* M3 surface-variant-darken-1 */
        }

        .multi-select-container {
            display: flex;
            flex-wrap: wrap;
        }

        .checkbox-group {
            margin-right: 16px;
            margin-bottom: 8px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            font-size: 14px; /* M3 body-medium */
            font-weight: 400;
            line-height: 20px;
            letter-spacing: 0.25px;
            color: #49454F; /* M3 on-surface-variant */
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 8px;
            width: 16px;
            height: 16px;
        }
  </style>

</head>
<body>
<!-- Fixed Header -->
<header>
<div class="header-left">
<div class="logo">ReVive</div>
<nav>
<span class="nav-tab nav-tab-active">CONTACT LOG</span>
<a href="#" class="nav-tab nav-tab-inactive">PROSPECTS</a>
<a href="intake.html" target="_blank" class="btn btn-secondary" style="margin-left: 16px; text-decoration: none;">New Intake</a>
</nav>
</div>

<div class="header-right">
<div class="search-container">
<input type="text" class="search-input" id="clientSearchInput" placeholder=" ">
<span class="search-label">Client Search</span>
<div class="suggestions-container" id="searchSuggestions"></div>
</div>
<div class="user-info">
<span>Andrea Leflore</span>
<div class="user-avatar"></div>
</div>
<button class="sign-out">Sign Out</button>
</div>
</header>

<!-- Table Container -->
<div class="table-container">

<!-- Scrollable Content -->
<div class="table-content">
<div class="table-rows-container">

<!-- Sticky Table Header Row -->
<div class="table-row">
<!-- Fixed Columns Header -->
<div class="fixed-columns">
<div class="column-header col-date">Date ↓</div>
<div class="column-header col-days">Days Ago ↓</div>
<div class="column-header col-provider">Provider ↓</div>
<div class="column-header col-client">Client ↓</div>
</div>

<!-- Scrollable Columns Header -->
<div class="scrollable-columns">
<div class="column-header col-service">Place of Service ↓</div>
<div class="column-header col-accompanied">Accompanied Appointment? ↓</div>
<div class="column-header col-documentation">Obtained Documentation ↓</div>
<div class="column-header col-resources">Resources Given ↓</div>
<div class="column-header col-health">On-Site Health Care Received ↓</div>
<div class="column-header col-program">Program Started ↓</div>
<div class="column-header col-housing">Housing Entered ↓</div>
<div class="column-header col-counted">? (Counted Columns) ↓</div>
<div class="column-header col-notes">Notes ↓</div>
<div class="column-header col-status">Program at Status ↓</div>
</div>
</div>

<!-- Row 1 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">03/19/2025</div>
<div class="column-cell col-days">0</div>
<div class="column-cell col-provider">Elena Ahmed</div>
<div class="column-cell col-client">Thiago Schmidt</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Engagement Center</div>
<div class="column-cell col-accompanied">Accompanied</div>
<div class="column-cell col-documentation">Homeless Verification Letters</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>Laundry</span>
<span>$5 Transit Card</span>
</div>
</div>
<div class="column-cell col-health">Yes</div>
<div class="column-cell col-program">Yes</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">3</div>
<div class="column-cell col-notes">Initial intake completed</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 11 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">09/15/2023</div>
<div class="column-cell col-days">185</div>
<div class="column-cell col-provider">Sofia Cohen</div>
<div class="column-cell col-client">Liam Nguyen</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Engagement Center</div>
<div class="column-cell col-accompanied">No</div>
<div class="column-cell col-documentation">No</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>$5 Transit Card</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">No</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">2</div>
<div class="column-cell col-notes">Initial visit</div>
<div class="column-cell col-status">Prospect</div>
</div>
</div>

<!-- Row 12 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">08/22/2023</div>
<div class="column-cell col-days">209</div>
<div class="column-cell col-provider">Jamal Silva</div>
<div class="column-cell col-client">Mia Patel</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">In Office</div>
<div class="column-cell col-accompanied">Accompanied</div>
<div class="column-cell col-documentation">State ID</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>Hygiene Products</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">Counseling - Life Skills</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">3</div>
<div class="column-cell col-notes">ID assistance provided</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 13 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">07/05/2023</div>
<div class="column-cell col-days">257</div>
<div class="column-cell col-provider">Mohammed Ahmed</div>
<div class="column-cell col-client">Noah Kim</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Phone/Text/Email</div>
<div class="column-cell col-accompanied">No</div>
<div class="column-cell col-documentation">No</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>$15 Transit Card</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">Employment Services</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">1</div>
<div class="column-cell col-notes">Phone follow-up</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 14 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">06/12/2023</div>
<div class="column-cell col-days">280</div>
<div class="column-cell col-provider">Elena Ahmed</div>
<div class="column-cell col-client">Ava Hernandez</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Engagement Center</div>
<div class="column-cell col-accompanied">Accompanied</div>
<div class="column-cell col-documentation">Homeless Verification Letters</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>Laundry</span>
<span>$5 Transit Card</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">No</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">4</div>
<div class="column-cell col-notes">Regular visit</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 15 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">05/29/2023</div>
<div class="column-cell col-days">294</div>
<div class="column-cell col-provider">Sonia Singh</div>
<div class="column-cell col-client">Ethan Choi</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Engagement Center</div>
<div class="column-cell col-accompanied">No</div>
<div class="column-cell col-documentation">No</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>OTC 6- Stomach/cold relief</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">No</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">2</div>
<div class="column-cell col-notes">Provided basic necessities</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 16 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">04/17/2023</div>
<div class="column-cell col-days">336</div>
<div class="column-cell col-provider">Leila Garcia</div>
<div class="column-cell col-client">Sophia Gupta</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Home Visit</div>
<div class="column-cell col-accompanied">No</div>
<div class="column-cell col-documentation">No</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Home Goods</span>
<span>OTC 7- Lotion / cream / skin</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">No</div>
<div class="column-cell col-housing">Permanent Supportive Housing</div>
<div class="column-cell col-counted">2</div>
<div class="column-cell col-notes">Home visit after housing</div>
<div class="column-cell col-status">Cressey House PSH</div>
</div>
</div>

<!-- Row 17 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">03/08/2023</div>
<div class="column-cell col-days">376</div>
<div class="column-cell col-provider">Sofia Cohen</div>
<div class="column-cell col-client">Jackson Lee</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Engagement Center</div>
<div class="column-cell col-accompanied">Accompanied</div>
<div class="column-cell col-documentation">Homeless Verification Letters</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>Laundry</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">No</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">3</div>
<div class="column-cell col-notes">Regular visit</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 18 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">02/14/2023</div>
<div class="column-cell col-days">398</div>
<div class="column-cell col-provider">Jamal Silva</div>
<div class="column-cell col-client">Isabella Brown</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Engagement Center</div>
<div class="column-cell col-accompanied">No</div>
<div class="column-cell col-documentation">No</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>$5 Transit Card</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">No</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">2</div>
<div class="column-cell col-notes">Quick visit</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 19 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">01/03/2023</div>
<div class="column-cell col-days">440</div>
<div class="column-cell col-provider">Sofia Cohen</div>
<div class="column-cell col-client">Aiden Patel</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Engagement Center</div>
<div class="column-cell col-accompanied">Accompanied</div>
<div class="column-cell col-documentation">State ID</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Food</span>
<span>Clothing</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">No</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">3</div>
<div class="column-cell col-notes">Assisted with ID</div>
<div class="column-cell col-status">Active</div>
</div>
</div>

<!-- Row 20 -->
<div class="table-row">
<div class="fixed-columns">
<div class="column-cell col-date">11/29/2022</div>
<div class="column-cell col-days">475</div>
<div class="column-cell col-provider">Elena Ahmed</div>
<div class="column-cell col-client">Charlotte Davis</div>
</div>
<div class="scrollable-columns">
<div class="column-cell col-service">Phone/Text/Email</div>
<div class="column-cell col-accompanied">No</div>
<div class="column-cell col-documentation">No</div>
<div class="column-cell col-resources">
<div class="resource-list">
<span>Uber/Lyft</span>
</div>
</div>
<div class="column-cell col-health">No</div>
<div class="column-cell col-program">Transportation</div>
<div class="column-cell col-housing">No</div>
<div class="column-cell col-counted">1</div>
<div class="column-cell col-notes">Provided transportation assistance</div>
<div class="column-cell col-status">Active</div>
</div>
</div>  
</div>
</div>
</div>

<script>

document.addEventListener('DOMContentLoaded', function() {
// Get the scrollable container
const tableContent = document.querySelector('.table-content');

// Variables for drag scrolling
let isDown = false;
let startX;
let scrollLeft;

// Event listeners for mouse behavior
tableContent.addEventListener('mousedown', function(e) {
isDown = true;
tableContent.style.cursor = 'grabbing';
startX = e.pageX - tableContent.offsetLeft;
scrollLeft = tableContent.scrollLeft;
e.preventDefault(); // Prevent text selection while dragging
});

tableContent.addEventListener('mouseleave', function() {
isDown = false;
tableContent.style.cursor = 'default';
});

tableContent.addEventListener('mouseup', function() {
isDown = false;
tableContent.style.cursor = 'default';
});

tableContent.addEventListener('mousemove', function(e) {
if (!isDown) return;
const x = e.pageX - tableContent.offsetLeft;
// Use a multiplier for faster/slower scrolling
const walk = (x - startX) * 1.5;
tableContent.scrollLeft = scrollLeft - walk;
});
});
// Mock data for client suggestions - in production, this would come from your database
const clientData = [
{ id: 1, firstName: 'Thiago', lastName: 'Schmidt' },
{ id: 2, firstName: 'Liam', lastName: 'Nguyen' },
{ id: 3, firstName: 'Mia', lastName: 'Patel' },
{ id: 4, firstName: 'Noah', lastName: 'Kim' },
{ id: 5, firstName: 'Ava', lastName: 'Hernandez' },
{ id: 6, firstName: 'Ethan', lastName: 'Choi' },
{ id: 7, firstName: 'Sophia', lastName: 'Gupta' },
{ id: 8, firstName: 'Jackson', lastName: 'Lee' },
{ id: 9, firstName: 'Isabella', lastName: 'Brown' },
{ id: 10, firstName: 'Aiden', lastName: 'Patel' },
{ id: 11, firstName: 'Charlotte', lastName: 'Davis' },
{ id: 12, firstName: 'Olivia', lastName: 'Martinez' },
{ id: 13, firstName: 'William', lastName: 'Johnson' },
{ id: 14, firstName: 'Emma', lastName: 'Taylor' },
{ id: 15, firstName: 'James', lastName: 'Wilson' }
];

// Elements
const searchInput = document.getElementById('clientSearchInput');
const suggestionsContainer = document.getElementById('searchSuggestions');

// Track current selected suggestion
let currentSelection = -1;

// Show suggestions as user types
searchInput.addEventListener('input', function() {
const query = this.value.trim().toLowerCase();

// Clear suggestions if query is empty
if (query === '') {
suggestionsContainer.innerHTML = '';
suggestionsContainer.style.display = 'none';
return;
}

// Filter clients based on input
const filteredClients = clientData.filter(client => {
const fullName = `${client.firstName} ${client.lastName}`.toLowerCase();
const reverseName = `${client.lastName} ${client.firstName}`.toLowerCase();
return fullName.includes(query) || reverseName.includes(query) || 
client.firstName.toLowerCase().includes(query) || 
client.lastName.toLowerCase().includes(query);
});

// Render suggestions
renderSuggestions(filteredClients, query);
});

// Handle keyboard navigation
searchInput.addEventListener('keydown', function(e) {
const suggestions = suggestionsContainer.querySelectorAll('.suggestion-item');

if (suggestions.length === 0) return;

// Down arrow
if (e.key === 'ArrowDown') {
e.preventDefault();
currentSelection = (currentSelection + 1) % suggestions.length;
updateSelection(suggestions);
} 
// Up arrow
else if (e.key === 'ArrowUp') {
e.preventDefault();
currentSelection = (currentSelection - 1 + suggestions.length) % suggestions.length;
updateSelection(suggestions);
} 
// Enter key
else if (e.key === 'Enter' && currentSelection >= 0) {
e.preventDefault();
suggestions[currentSelection].click();
} 
// Escape key
else if (e.key === 'Escape') {
suggestionsContainer.innerHTML = '';
suggestionsContainer.style.display = 'none';
currentSelection = -1;
}
});

// Close suggestions when clicking outside
document.addEventListener('click', function(e) {
if (e.target !== searchInput && e.target !== suggestionsContainer) {
suggestionsContainer.innerHTML = '';
suggestionsContainer.style.display = 'none';
currentSelection = -1;
}
});

// Render filtered suggestions
function renderSuggestions(clients, query) {
// Reset selection
currentSelection = -1;

// Clear previous suggestions
suggestionsContainer.innerHTML = '';

if (clients.length === 0) {
suggestionsContainer.style.display = 'none';
return;
}

// Create and append suggestion items
clients.forEach((client, index) => {
const item = document.createElement('div');
item.className = 'suggestion-item';
item.dataset.index = index;

// Highlight matching text
const fullName = `${client.firstName} ${client.lastName}`;
item.innerHTML = highlightMatch(fullName, query);

// Handle click on suggestion
item.addEventListener('click', function() {
searchInput.value = fullName;
suggestionsContainer.innerHTML = '';
suggestionsContainer.style.display = 'none';

// Here you could trigger a filter of the table rows based on the selected client
filterTableByClient(fullName);
});

// Handle mouse hover
item.addEventListener('mouseenter', function() {
currentSelection = parseInt(this.dataset.index);
updateSelection(suggestionsContainer.querySelectorAll('.suggestion-item'));
});

suggestionsContainer.appendChild(item);
});

// Show suggestions container
suggestionsContainer.style.display = 'block';
}

// Update visual selection in dropdown
function updateSelection(suggestions) {
suggestions.forEach((item, index) => {
if (index === currentSelection) {
item.classList.add('selected');

// Ensure the selected item is visible in the dropdown
if (item.offsetTop < suggestionsContainer.scrollTop) {
suggestionsContainer.scrollTop = item.offsetTop;
} else if (item.offsetTop + item.offsetHeight > suggestionsContainer.scrollTop + suggestionsContainer.offsetHeight) {
suggestionsContainer.scrollTop = item.offsetTop + item.offsetHeight - suggestionsContainer.offsetHeight;
}
} else {
item.classList.remove('selected');
}
});
}

// Highlight matching text in suggestions
function highlightMatch(text, query) {
if (!query) return text;

// Case insensitive search
const regex = new RegExp(`(${query.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')})`, 'gi');
return text.replace(regex, '<span class="suggestion-highlight">$1</span>');
}

// Filter table rows based on selected client
function filterTableByClient(clientName) {
// Get all table rows except the header
const rows = document.querySelectorAll('.table-row:not(:first-child)');

// Normalize the client name for comparison
const normalizedSearch = clientName.toLowerCase();

// Track if we found any matches
let foundMatches = false;

// Check each row
rows.forEach(row => {
// Get the client name cell from the fixed columns
const clientCell = row.querySelector('.fixed-columns .col-client');
const rowClientName = clientCell.textContent.toLowerCase();

// Check if this row matches the search
if (rowClientName.includes(normalizedSearch)) {
row.style.display = ''; // Show matching row
foundMatches = true;

// Optional: highlight the matching text in the cell
clientCell.innerHTML = highlightMatch(clientCell.textContent, clientName);
} else {
row.style.display = 'none'; // Hide non-matching row
}
});

// Optional: Display a "no results" message if needed
const noResultsMessage = document.querySelector('.no-results-message');
if (noResultsMessage) {
noResultsMessage.style.display = foundMatches ? 'none' : 'block';
}
}
// Add focus event listener to the search input
searchInput.addEventListener('focus', function() {
// Clear the input value when focused
this.value = '';

// Also clear any existing suggestions
suggestionsContainer.innerHTML = '';
suggestionsContainer.style.display = 'none';

// Reset any table filtering
resetTableFilters();
});

// Function to reset table filters and show all rows
function resetTableFilters() {
// Get all table rows except the header
const rows = document.querySelectorAll('.table-row:not(:first-child)');

// Show all rows
rows.forEach(row => {
row.style.display = '';

// Remove any highlighting from client cells
const clientCell = row.querySelector('.fixed-columns .col-client');
if (clientCell) {
clientCell.textContent = clientCell.textContent; // This removes any HTML and resets to plain text
}
});

// Hide any "no results" message if it exists
const noResultsMessage = document.querySelector('.no-results-message');
if (noResultsMessage) {
noResultsMessage.style.display = 'none';
}
}    

</script>
/*  --- DIALOG BOX  ---  */
<script>
document.addEventListener('DOMContentLoaded', function() {
// ... your existing JavaScript (drag-to-scroll, search, etc.) ...

function initializeDialog() {
const dialog = document.getElementById('clientDialog');
if (!dialog) {
console.error('Dialog element not found.');
return;
}

const dialogClientName = document.getElementById('dialogClientName');
const initialOptionsScreen = document.getElementById('dialogInitialOptions');
const checkInFormScreen = document.getElementById('dialogCheckInForm');
const quickCheckInBtn = document.getElementById('quickCheckInBtn'); // Get the Quick Check In button

if (!dialogClientName || !initialOptionsScreen || !checkInFormScreen || !quickCheckInBtn) {
console.error('Dialog content elements not found.');
return;
}

const clientCells = document.querySelectorAll('.fixed-columns .col-client');
clientCells.forEach(cell => {
cell.style.cursor = 'pointer';
cell.addEventListener('click', function(e) {
e.preventDefault();
e.stopPropagation();
const clientName = this.textContent.trim();
console.log('Client cell clicked:', clientName);
showDialog(clientName);
});
});

function showDialog(clientName) {
console.log('Showing dialog for client:', clientName);
dialogClientName.textContent = clientName;
initialOptionsScreen.style.display = 'block';
checkInFormScreen.style.display = 'none';
dialog.style.display = 'flex'; // Use flex to show the dialog
dialog.classList.add('show');
document.body.style.overflow = 'hidden';
}

const dialogCloseBtn = document.getElementById('dialogCloseBtn');
const initialCancelBtn = document.getElementById('initialCancelBtn');
const dialogCancelBtn = document.getElementById('dialogCancelBtn');

if (dialogCloseBtn) {
dialogCloseBtn.addEventListener('click', () => {
dialog.style.display = 'none';
dialog.classList.remove('show');
document.body.style.overflow = 'auto';
});
}

if (initialCancelBtn) {
initialCancelBtn.addEventListener('click', () => {
dialog.style.display = 'none';
dialog.classList.remove('show');
document.body.style.overflow = 'auto';
});
}

if (dialogCancelBtn) {
dialogCancelBtn.addEventListener('click', () => {
dialog.style.display = 'none';
dialog.classList.remove('show');
document.body.style.overflow = 'auto';
});
}

// Add event listener to Quick Check In button
if (quickCheckInBtn) {
quickCheckInBtn.addEventListener('click', () => {
initialOptionsScreen.style.display = 'none';
checkInFormScreen.style.display = 'block';
});
}

// Add other dialog event listeners here (submit, etc.)
}

initializeDialog(); // <--- THIS WAS MISSING
});
</script>

<div id="clientDialog" class="dialog-overlay" style="display: none;">
<div class="dialog-content">
<div class="dialog-header">
<h3 id="dialogClientName">Client Name</h3>
<button class="dialog-close" id="dialogCloseBtn">&times;</button>
</div>

<div id="dialogInitialOptions" class="dialog-body">
<p class="dialog-prompt">What would you like to do?</p>
<div class="dialog-options">
<button id="quickCheckInBtn" class="btn btn-primary">Quick Check-In</button>
<button id="clientHistoryBtn" class="btn btn-primary" onclick="window.open('clientLogHistory.html', '_blank');">Log History</button>
<button id="initialCancelBtn" class="btn btn-secondary">Cancel</button>
</div>
</div>

<div id="dialogCheckInForm" class="dialog-body" style="display: none;">
<p class="dialog-prompt">Client objective for visiting today:</p>
<div class="form-group">
<div class="multi-select-container">
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="CM"> Case Management (CM)</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="OT"> Occupational Therapy (OT)</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="Food"> Food</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="Recreation"> Recreation</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="Laundry"> Laundry</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="Housing"> Housing Support</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="Healthcare"> Healthcare</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="Employment"> Employment Services</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="ID"> ID/Documentation</label>
</div>
<div class="checkbox-group">
<label><input type="checkbox" name="objective" value="Other"> Other</label>
</div>
</div>
</div>
<div class="form-group">
<p class="form-label">Comments:</p>
<textarea id="visitComments" rows="4" class="form-control" placeholder="Enter any additional notes or comments here..."></textarea>
</div>

<div class="dialog-options">
<button id="dialogCancelBtn" class="btn btn-secondary">Cancel</button>
<button id="dialogSubmitBtn" class="btn btn-primary">Submit</button>
</div>
</div>
</div>
</div>
</body>
</html>
